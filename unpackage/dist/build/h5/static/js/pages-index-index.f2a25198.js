(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"00ab":function(t,e,a){"use strict";var i=a("cdae"),o=a.n(i);o.a},1602:function(t,e,a){"use strict";a.r(e);var i=a("d0ce"),o=a("f524");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("00ab");var s,c=a("f0c5"),r=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"8a1207e0",null,!1,i["a"],s);e["default"]=r.exports},"1e72":function(t,e,a){"use strict";a("c19f"),a("ace4"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("2954"),a("649e"),a("219c"),a("b39a"),a("72f7"),a("ddb0"),a("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{saveOnshow:!1,imgOnShow:!1,imgPath:"",pageOne:!0,pageTwo:!1,pageThree:!1,boxWidth:0,boxHeight:0,imgSrc:"",imgBox:[{preImg:"/static/pre_border/1.png",srcImg:"/static/1.png"},{preImg:"/static/pre_border/2.png",srcImg:"/static/2.png"},{preImg:"/static/pre_border/3.png",srcImg:"/static/3.png"}],saveIf:!0,posStartX:0,posStartY:0,offSetX:0,offsetY:0,posX:0,posY:0,startPosX:0,startPosY:0,setData:"",imgSrc1:"",scaleSize:1,picWidth:100,picHeigth:100,filePath:"",imgSrc2:"/static/1.png",canvas:{}}},onLoad:function(){this.test()},methods:{back:function(){this.pageTwo=!1,this.pageOne=!0,this.saveOnshow=!1,this.imgOnShow=!1},switchImg:function(t){this.saveIf=!1,this.imgSrc2=t,this.drawImg(),this.saveIf=!0},scaler:function(t){var e=t;this.scaleSize=e.detail["scale"],this.drawImg()},start:function(t){var e=t.touches[0];this.posStartX=e["pageX"],this.posStartY=e["pageY"],this.startPosX=this.posX,this.startPosY=this.posY},move:function(t){if(this.saveIf){var e=t.touches[0];this.offSetX=(e["pageX"]-this.posStartX)/1.3,this.offSetY=(e["pageY"]-this.posStartY)/1.3,this.posX=this.startPosX+this.offSetX,this.posY=this.startPosY+this.offSetY,this.drawImg()}},moveEnd:function(t){this.posX=this.startPosX+this.offSetX,this.posY=this.startPosY+this.offSetY},drawUpdata:function(){this.drawImg()},hideImg:function(){this.imgOnShow=!1,this.saveOnshow=!0},drawImg:function(){var t=this,e=uni.createCanvasContext("firstCanvas");uni.getImageInfo({src:t.imgSrc2,success:function(a){var i=a.height,o=a.width;uni.getImageInfo({src:t.imgSrc1,success:function(a){var n=a.width,s=a.height;uni.getSystemInfo({success:function(a){var c=t.boxWidth,r=t.boxHeight,d=n,h=s;n>c&&(d=c,h/=n/c),e.drawImage(t.imgSrc1,0,0,n,s,t.posX,t.posY,d*t.scaleSize,h*t.scaleSize),e.drawImage(t.imgSrc2,0,0,o,i,0,0,c,r),e.draw(),t.canvas=e}})}})}})},saveImg:function(){if(0!=this.saveIf){this.saveOnshow=!1,this.saveIf=!1;var t=this;uni.showLoading({title:"正在保存",mask:!0}),uni.canvasToTempFilePath({canvasId:"firstCanvas",success:function(e){uni.hideLoading();var a=uni.getSystemInfoSync().uniPlatform;console.log(a),t.imgPath=e.tempFilePath,t.imgOnShow=!0,"app"!=a&&"web"!=a&&uni.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(e){console.log(e),uni.showToast({title:"保存成功",success:function(){t.saveIf=!0},fail:function(){thar.saveIf=!0}}),t.setData={modalname:null}},fail:function(e){console.log(e),"saveImageToPhotosAlbum:fail auth deny"==e.errMsg&&uni.showModal({title:"请打开相册授权",success:function(e){e.confirm?uni.openSetting({success:function(e){t.saveIf=!0},fail:function(e){console.log("openSetting fail",e),t.saveIf=!0}}):e.cancel&&(console.log("用户取消"),t.saveIf=!0)},fail:function(){thar.saveIf=!0}}),thar.saveIf=!0}})},fail:function(e){console.log(e),t.saveIf=!0}})}},test:function(){var t=this;uni.createSelectorQuery().in(this).select(".imgBox").boundingClientRect((function(e){t.boxWidth=e.width,t.boxHeight=e.height,console.log(t.boxWidth),console.log(t.boxHeight)})).exec()},edit:function(){uni.navigateTo({url:"edit?imgSrc="+imgSrc})},savePicture:function(t){for(var e=t.split(","),a=atob(e[1]),i=new ArrayBuffer(a.length),o=new Uint8Array(i),n=0;n<a.length;n++)o[n]=a.charCodeAt(n);var s=new Blob([i],{type:"application/octet-stream"}),c=URL.createObjectURL(s),r=document.createElement("a");r.href=c,r.download=(new Date).valueOf()+".png";var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(d),URL.revokeObjectURL(c)},upLoadImg:function(){var t=this;uni.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(e){t.test(),t.imgSrc=e.tempFilePaths,t.imgSrc1=t.imgSrc[0],t.pageTwo=!0,t.pageOne=!1,t.saveOnshow=!0,t.drawImg()}})}}};e.default=i},b012:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".resImgBox[data-v-8a1207e0]{z-index:99999;display:flex;position:absolute;align-items:center;width:100%;height:100%;background-color:rgba(16,16,16,.2)}.imgResult[data-v-8a1207e0]{width:80%;margin:0 auto}.word_bottom[data-v-8a1207e0]{text-align:center;width:100%;position:absolute;bottom:40px}.word[data-v-8a1207e0]{width:100%;bottom:20px;position:absolute}.word p[data-v-8a1207e0]{font-size:20px;font-weight:900;color:#ff8826;text-align:center;width:100%}.shu[data-v-8a1207e0]{margin:150px auto;width:0;height:70px;border-left:6px solid #ff8826}.heng[data-v-8a1207e0]{margin:-187px auto;width:70px;height:0;border-top:6px solid #ff8826}uni-page-body[data-v-8a1207e0]{height:100%}.mainPage[data-v-8a1207e0]{height:100%;background-color:#feebed}.imgBox[data-v-8a1207e0]{position:relative;top:10%;margin:0 auto;border-radius:6px;width:44.218vh;height:76.61vh;border:5px solid #ff8826}uni-image[data-v-8a1207e0]{width:100%;height:100%}.foot-Img[data-v-8a1207e0]{background-color:#b01f24;position:fixed;bottom:0;height:5%;width:100%}.logo[data-v-8a1207e0]{height:%?200?%;width:%?200?%;margin-top:%?200?%;margin-left:auto;margin-right:auto;margin-bottom:%?50?%}.text-area[data-v-8a1207e0]{display:flex;justify-content:center}.title[data-v-8a1207e0]{font-size:%?36?%;color:#8f8f94}.button_back[data-v-8a1207e0]{z-index:1;width:70px;height:40px;background-color:#ffe0cc;position:absolute;left:-2px;top:80px;border-top-right-radius:25px;border-bottom-right-radius:25px;border-left:0;border:2px solid #fff}.button_back p[data-v-8a1207e0]{margin-left:10px;line-height:40px}.button_save[data-v-8a1207e0]{z-index:1;width:70px;height:40px;background-color:#ffe0cc;position:absolute;right:-2px;bottom:160px;border-top-left-radius:25px;border-bottom-left-radius:25px;border-left:0;border:2px solid #fff}.button_save p[data-v-8a1207e0]{margin-left:10px;line-height:40px}.canvas-border[data-v-8a1207e0]{margin:0 auto;height:100%;height:100%}.enlarge[data-v-8a1207e0]{z-index:998;width:100%;height:100%}.backImg[data-v-8a1207e0]{opacity:0;width:100%;height:100%;position:absolute;left:0;right:0}.foot-ImgTwo[data-v-8a1207e0]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;background-color:#feebed;border-top:3px solid #ffe0cc;position:fixed;bottom:0;height:80px;width:100%}.moveImg[data-v-8a1207e0]{z-index:1}.moveAre[data-v-8a1207e0]{overflow:hidden;width:100%;height:100%}.fontImg[data-v-8a1207e0]{top:0;left:0;position:absolute;height:100%;width:100%}uni-page-body[data-v-8a1207e0]{width:100%;height:100%}.canvas-content[data-v-8a1207e0]{background-color:#feebed;width:100%;height:100%}.imgBox_pre[data-v-8a1207e0]{width:70px;height:70px}.imgBox_pre img[data-v-8a1207e0]{width:100%;height:100%}uni-canvas[data-v-8a1207e0]{width:100%;height:100%}",""]),t.exports=e},cdae:function(t,e,a){var i=a("b012");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("67d76e54",i,!0,{sourceMap:!1,shadowMode:!1})},d0ce:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"mainPage"},[t.imgOnShow?a("v-uni-view",{staticClass:"resImgBox",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideImg.apply(void 0,arguments)}}},[t.imgOnShow?a("img",{staticClass:"imgResult",attrs:{src:t.imgPath,alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideImg.apply(void 0,arguments)}}}):t._e()]):t._e(),t.pageTwo?a("v-uni-view",{staticClass:"button_back",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[t.pageTwo?a("p",[t._v("返回")]):t._e()]):t._e(),t.saveOnshow?a("v-uni-view",{staticClass:"button_save",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveImg()}}},[t.pageTwo?a("p",[t._v("储存")]):t._e()]):t._e(),a("v-uni-view",{staticClass:"imgBox"},[t.pageOne?a("v-uni-view",{staticClass:"pageOne",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upLoadImg()}}},[t.pageOne?a("v-uni-view",{staticClass:"shu"}):t._e(),t.pageOne?a("v-uni-view",{staticClass:"heng"}):t._e(),t.pageOne?a("v-uni-view",{staticClass:"word",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.test.apply(void 0,arguments)}}}):t._e()],1):t._e(),t.pageTwo?a("v-uni-movable-area",{staticClass:"moveAre",attrs:{"scale-area":t.pageTwo}},[t.pageTwo?a("v-uni-view",{staticClass:"canvas-border",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.start.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.move.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.moveEnd.apply(void 0,arguments)},longpress:function(e){arguments[0]=e=t.$handleEvent(e),t.saveImg()}}},[t.pageTwo?a("v-uni-canvas",{attrs:{"canvas-id":"firstCanvas"},on:{longpress:function(e){arguments[0]=e=t.$handleEvent(e),t.saveImg()}}}):t._e()],1):t._e(),t.pageTwo?a("v-uni-movable-view",{style:"height:"+t.picWidth+"px;width:"+t.picHeigth+"px;",attrs:{animation:"false",calss:"enlarge",scale:"true"},on:{scale:function(e){arguments[0]=e=t.$handleEvent(e),t.scaler.apply(void 0,arguments)}}}):t._e()],1):t._e()],1),t.pageOne?a("v-uni-view",{staticClass:"foot-Img"},[a("img",{attrs:{src:"/static/footer.png",alt:""}}),a("p",{staticClass:"word_bottom"},[t._v("上海体育学院")])]):t._e(),t._e()],1)},n=[]},f524:function(t,e,a){"use strict";a.r(e);var i=a("1e72"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a}}]);